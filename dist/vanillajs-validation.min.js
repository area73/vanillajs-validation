!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b():"function"==typeof define&&define.amd?define(b):b()}(0,function(){"use strict";function b(a){var b=2,c=a.split("").reduce(function(a,b){return[parseInt(b,10)].concat(a)},[]).reduce(function(a,c){return a+=c*b,b=9==b?2:b+1,a},0)%11;return 2>c?0:11-c}var d,X="undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?{}:self:global:window,f=(function(Q,U){!function(){var G=Math.floor,Y=Math.min,aa=Math.max,ba="object"==typeof self&&self.self===self&&self||"object"==typeof X&&X.global===X&&X||this||{},r=ba._,ca=Array.prototype,da=Object.prototype,o="undefined"==typeof Symbol?null:Symbol.prototype,f=ca.push,ea=ca.slice,fa=da.toString,h=da.hasOwnProperty,i=Array.isArray,l=Object.keys,a=Object.create,e=function(){},ga=function(a){return a instanceof ga?a:this instanceof ga?void(this._wrapped=a):new ga(a)};U.nodeType?ba._=ga:(!Q.nodeType&&Q.exports&&(U=Q.exports=ga),U._=ga),ga.VERSION="1.9.1";var c,p=function(a,b,c){if(void 0===b)return a;switch(null==c?3:c){case 1:return function(c){return a.call(b,c)};case 3:return function(c,d,f){return a.call(b,c,d,f)};case 4:return function(c,d,f,e){return a.call(b,c,d,f,e)};}return function(){return a.apply(b,arguments)}},v=function(a,b,d){return ga.iteratee===c?null==a?ga.identity:ga.isFunction(a)?p(a,b,d):ga.isObject(a)&&!ga.isArray(a)?ga.matcher(a):ga.property(a):ga.iteratee(a,b)};ga.iteratee=c=function(a,b){return v(a,b,1/0)};var m=function(a,b){return b=null==b?a.length-1:+b,function(){for(var c=aa(arguments.length-b,0),d=Array(c),f=0;f<c;f++)d[f]=arguments[f+b];switch(b){case 0:return a.call(this,d);case 1:return a.call(this,arguments[0],d);case 2:return a.call(this,arguments[0],arguments[1],d);}var g=Array(b+1);for(f=0;f<b;f++)g[f]=arguments[f];return g[b]=d,a.apply(this,g)}},s=function(b){if(!ga.isObject(b))return{};if(a)return a(b);e.prototype=b;var c=new e;return e.prototype=null,c},g=function(a){return function(b){return null==b?void 0:b[a]}},b=function(a,b){return null!=a&&h.call(a,b)},t=function(a,b){for(var c=b.length,d=0;d<c;d++){if(null==a)return;a=a[b[d]]}return c?a:void 0},n=Math.pow(2,53)-1,j=g("length"),k=function(a){var b=j(a);return"number"==typeof b&&0<=b&&b<=9007199254740991};ga.each=ga.forEach=function(a,b,c){var d,e;if(b=p(b,c),k(a))for(d=0,e=a.length;d<e;d++)b(a[d],d,a);else{var f=ga.keys(a);for(d=0,e=f.length;d<e;d++)b(a[f[d]],f[d],a)}return a},ga.map=ga.collect=function(b,c,d){c=v(c,d);for(var e,f=!k(b)&&ga.keys(b),g=(f||b).length,h=Array(g),i=0;i<g;i++)e=f?f[i]:i,h[i]=c(b[e],e,b);return h};var u=function(b){return function(a,c,d,e){var f=3<=arguments.length;return function(c,d,f,g){var h=!k(c)&&ga.keys(c),i=(h||c).length,j=0<b?0:i-1;for(g||(f=c[h?h[j]:j],j+=b);0<=j&&j<i;j+=b){var l=h?h[j]:j;f=d(f,c[l],l,c)}return f}(a,p(c,e,4),d,f)}};ga.reduce=ga.foldl=ga.inject=u(1),ga.reduceRight=ga.foldr=u(-1),ga.find=ga.detect=function(a,b,c){var d=(k(a)?ga.findIndex:ga.findKey)(a,b,c);if(void 0!==d&&-1!==d)return a[d]},ga.filter=ga.select=function(a,b,c){var d=[];return b=v(b,c),ga.each(a,function(a,c,f){b(a,c,f)&&d.push(a)}),d},ga.reject=function(a,b,c){return ga.filter(a,ga.negate(v(b)),c)},ga.every=ga.all=function(a,b,c){b=v(b,c);for(var d,e=!k(a)&&ga.keys(a),f=(e||a).length,g=0;g<f;g++)if(d=e?e[g]:g,!b(a[d],d,a))return!1;return!0},ga.some=ga.any=function(a,b,c){b=v(b,c);for(var d,e=!k(a)&&ga.keys(a),f=(e||a).length,g=0;g<f;g++)if(d=e?e[g]:g,b(a[d],d,a))return!0;return!1},ga.contains=ga.includes=ga.include=function(a,b,c,d){return k(a)||(a=ga.values(a)),("number"!=typeof c||d)&&(c=0),0<=ga.indexOf(a,b,c)},ga.invoke=m(function(a,b,c){var d,f;return ga.isFunction(b)?f=b:ga.isArray(b)&&(d=b.slice(0,-1),b=b[b.length-1]),ga.map(a,function(a){var e=f;if(!e){if(d&&d.length&&(a=t(a,d)),null==a)return;e=a[b]}return null==e?e:e.apply(a,c)})}),ga.pluck=function(a,b){return ga.map(a,ga.property(b))},ga.where=function(a,b){return ga.filter(a,ga.matcher(b))},ga.findWhere=function(a,b){return ga.find(a,ga.matcher(b))},ga.max=function(b,c,d){var f,g,h=-1/0,j=-1/0;if(null==c||"number"==typeof c&&"object"!=typeof b[0]&&null!=b)for(var m=0,n=(b=k(b)?b:ga.values(b)).length;m<n;m++)null!=(f=b[m])&&h<f&&(h=f);else c=v(c,d),ga.each(b,function(a,b,d){g=c(a,b,d),(j<g||g===-1/0&&h===-1/0)&&(h=a,j=g)});return h},ga.min=function(b,c,d){var f,g,h=1/0,j=1/0;if(null==c||"number"==typeof c&&"object"!=typeof b[0]&&null!=b)for(var m=0,n=(b=k(b)?b:ga.values(b)).length;m<n;m++)null!=(f=b[m])&&f<h&&(h=f);else c=v(c,d),ga.each(b,function(a,b,d){((g=c(a,b,d))<j||g===1/0&&h===1/0)&&(h=a,j=g)});return h},ga.shuffle=function(a){return ga.sample(a,1/0)},ga.sample=function(b,c,d){if(null==c||d)return k(b)||(b=ga.values(b)),b[ga.random(b.length-1)];var e=k(b)?ga.clone(b):ga.values(b),f=j(e);c=aa(Y(c,f),0);for(var g=0;g<c;g++){var h=ga.random(g,f-1),a=e[g];e[g]=e[h],e[h]=a}return e.slice(0,c)},ga.sortBy=function(a,b,c){var d=0;return b=v(b,c),ga.pluck(ga.map(a,function(a,c,f){return{value:a,index:d++,criteria:b(a,c,f)}}).sort(function(a,b){var c=a.criteria,d=b.criteria;if(c!==d){if(d<c||void 0===c)return 1;if(c<d||void 0===d)return-1}return a.index-b.index}),"value")};var w=function(a,b){return function(c,d,e){var f=b?[[],[]]:{};return d=v(d,e),ga.each(c,function(b,g){var h=d(b,g,c);a(f,b,h)}),f}};ga.groupBy=w(function(a,c,d){b(a,d)?a[d].push(c):a[d]=[c]}),ga.indexBy=w(function(a,b,c){a[c]=b}),ga.countBy=w(function(a,c,d){b(a,d)?a[d]++:a[d]=1});var x=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;ga.toArray=function(a){return a?ga.isArray(a)?ea.call(a):ga.isString(a)?a.match(x):k(a)?ga.map(a,ga.identity):ga.values(a):[]},ga.size=function(a){return null==a?0:k(a)?a.length:ga.keys(a).length},ga.partition=w(function(a,b,c){a[c?0:1].push(b)},!0),ga.first=ga.head=ga.take=function(a,b,c){return null==a||1>a.length?null==b?void 0:[]:null==b||c?a[0]:ga.initial(a,a.length-b)},ga.initial=function(a,b,c){return ea.call(a,0,aa(0,a.length-(null==b||c?1:b)))},ga.last=function(a,b,c){return null==a||1>a.length?null==b?void 0:[]:null==b||c?a[a.length-1]:ga.rest(a,aa(0,a.length-b))},ga.rest=ga.tail=ga.drop=function(a,b,c){return ea.call(a,null==b||c?1:b)},ga.compact=function(a){return ga.filter(a,Boolean)};var y=function(b,c,d,e){for(var f,g=(e=e||[]).length,h=0,m=j(b);h<m;h++)if(f=b[h],!(k(f)&&(ga.isArray(f)||ga.isArguments(f))))d||(e[g++]=f);else if(c)for(var n=0,o=f.length;n<o;)e[g++]=f[n++];else y(f,c,d,e),g=e.length;return e};ga.flatten=function(a,b){return y(a,b,!1)},ga.without=m(function(a,b){return ga.difference(a,b)}),ga.uniq=ga.unique=function(b,c,d,f){ga.isBoolean(c)||(f=d,d=c,c=!1),null!=d&&(d=v(d,f));for(var g=[],h=[],i=0,k=j(b);i<k;i++){var a=b[i],l=d?d(a,i,b):a;c&&!d?(i&&h===l||g.push(a),h=l):d?ga.contains(h,l)||(h.push(l),g.push(a)):ga.contains(g,a)||g.push(a)}return g},ga.union=m(function(a){return ga.uniq(y(a,!0,!0))}),ga.intersection=function(a){for(var b,c=[],d=arguments.length,e=0,f=j(a);e<f;e++)if(b=a[e],!ga.contains(c,b)){var g;for(g=1;g<d&&ga.contains(arguments[g],b);g++);g===d&&c.push(b)}return c},ga.difference=m(function(a,b){return b=y(b,!0,!0),ga.filter(a,function(a){return!ga.contains(b,a)})}),ga.unzip=function(a){for(var b=a&&ga.max(a,j).length||0,c=Array(b),d=0;d<b;d++)c[d]=ga.pluck(a,d);return c},ga.zip=m(ga.unzip),ga.object=function(a,b){for(var c={},d=0,e=j(a);d<e;d++)b?c[a[d]]=b[d]:c[a[d][0]]=a[d][1];return c};var A=function(a){return function(b,c,d){c=v(c,d);for(var e=j(b),f=0<a?0:e-1;0<=f&&f<e;f+=a)if(c(b[f],f,b))return f;return-1}};ga.findIndex=A(1),ga.findLastIndex=A(-1),ga.sortedIndex=function(b,c,d,f){for(var g,h=(d=v(d,f,1))(c),i=0,k=j(b);i<k;)g=G((i+k)/2),d(b[g])<h?i=g+1:k=g;return i};var E=function(b,c,d){return function(a,f,g){var h=0,k=j(a);if("number"==typeof g)0<b?h=0<=g?g:aa(g+k,h):k=0<=g?Y(g+1,k):g+k+1;else if(d&&g&&k)return a[g=d(a,f)]===f?g:-1;if(f!=f)return 0<=(g=c(ea.call(a,h,k),ga.isNaN))?g+h:-1;for(g=0<b?h:k-1;0<=g&&g<k;g+=b)if(a[g]===f)return g;return-1}};ga.indexOf=E(1,ga.findIndex,ga.sortedIndex),ga.lastIndexOf=E(-1,ga.findLastIndex),ga.range=function(a,b,c){null==b&&(b=a||0,a=0),c||(c=b<a?-1:1);for(var d=aa(Math.ceil((b-a)/c),0),f=Array(d),g=0;g<d;g++,a+=c)f[g]=a;return f},ga.chunk=function(a,b){if(null==b||1>b)return[];for(var c=[],d=0,e=a.length;d<e;)c.push(ea.call(a,d,d+=b));return c};var I=function(a,b,c,d,e){if(!(d instanceof b))return a.apply(c,e);var f=s(a.prototype),g=a.apply(f,e);return ga.isObject(g)?g:f};ga.bind=m(function(a,b,c){if(!ga.isFunction(a))throw new TypeError("Bind must be called on a function");var d=m(function(e){return I(a,d,b,this,c.concat(e))});return d}),ga.partial=m(function(b,c){var d=ga.partial.placeholder,f=function(){for(var a=0,g=c.length,h=Array(g),e=0;e<g;e++)h[e]=c[e]===d?arguments[a++]:c[e];for(;a<arguments.length;)h.push(arguments[a++]);return I(b,f,this,this,h)};return f}),(ga.partial.placeholder=ga).bindAll=m(function(a,b){var c=(b=y(b,!1,!1)).length;if(1>c)throw new Error("bindAll must be passed function names");for(;c--;){var d=b[c];a[d]=ga.bind(a[d],a)}}),ga.memoize=function(a,c){var d=function(f){var g=d.cache,h=""+(c?c.apply(this,arguments):f);return b(g,h)||(g[h]=a.apply(this,arguments)),g[h]};return d.cache={},d},ga.delay=m(function(a,b,c){return setTimeout(function(){return a.apply(null,c)},b)}),ga.defer=ga.partial(ga.delay,ga,1),ga.throttle=function(b,d,e){var f,g,h,j,k=0;e||(e={});var m=function(){k=!1===e.leading?0:ga.now(),f=null,j=b.apply(g,h),f||(g=h=null)},c=function(){var a=ga.now();k||!1!==e.leading||(k=a);var c=d-(a-k);return g=this,h=arguments,0>=c||d<c?(f&&(clearTimeout(f),f=null),k=a,j=b.apply(g,h),f||(g=h=null)):f||!1===e.trailing||(f=setTimeout(m,c)),j};return c.cancel=function(){clearTimeout(f),k=0,f=g=h=null},c},ga.debounce=function(b,c,d){var e,f,g=function(a,c){e=null,c&&(f=b.apply(a,c))},a=m(function(a){if(e&&clearTimeout(e),d){var h=!e;e=setTimeout(g,c),h&&(f=b.apply(this,a))}else e=ga.delay(g,c,this,a);return f});return a.cancel=function(){clearTimeout(e),e=null},a},ga.wrap=function(a,b){return ga.partial(b,a)},ga.negate=function(a){return function(){return!a.apply(this,arguments)}},ga.compose=function(){var a=arguments,b=a.length-1;return function(){for(var c=b,d=a[b].apply(this,arguments);c--;)d=a[c].call(this,d);return d}},ga.after=function(a,b){return function(){if(1>--a)return b.apply(this,arguments)}},ga.before=function(a,b){var c;return function(){return 0<--a&&(c=b.apply(this,arguments)),1>=a&&(b=null),c}},ga.once=ga.partial(ga.before,2),ga.restArguments=m;var L=!{toString:null}.propertyIsEnumerable("toString"),H=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],F=function(a,c){var d=H.length,f=a.constructor,g=ga.isFunction(f)&&f.prototype||da,h="constructor";for(b(a,h)&&!ga.contains(c,h)&&c.push(h);d--;)(h=H[d])in a&&a[h]!==g[h]&&!ga.contains(c,h)&&c.push(h)};ga.keys=function(a){if(!ga.isObject(a))return[];if(l)return l(a);var c=[];for(var d in a)b(a,d)&&c.push(d);return L&&F(a,c),c},ga.allKeys=function(a){if(!ga.isObject(a))return[];var b=[];for(var c in a)b.push(c);return L&&F(a,b),b},ga.values=function(a){for(var b=ga.keys(a),c=b.length,d=Array(c),e=0;e<c;e++)d[e]=a[b[e]];return d},ga.mapObject=function(b,c,d){c=v(c,d);for(var e,f=ga.keys(b),g=f.length,h={},i=0;i<g;i++)e=f[i],h[e]=c(b[e],e,b);return h},ga.pairs=function(a){for(var b=ga.keys(a),c=b.length,d=Array(c),e=0;e<c;e++)d[e]=[b[e],a[b[e]]];return d},ga.invert=function(a){for(var b={},c=ga.keys(a),d=0,e=c.length;d<e;d++)b[a[c[d]]]=c[d];return b},ga.functions=ga.methods=function(a){var b=[];for(var c in a)ga.isFunction(a[c])&&b.push(c);return b.sort()};var q=function(b,c){return function(d){var f=arguments.length;if(c&&(d=Object(d)),2>f||null==d)return d;for(var g=1;g<f;g++)for(var h,j=arguments[g],k=b(j),i=k.length,l=0;l<i;l++)h=k[l],c&&void 0!==d[h]||(d[h]=j[h]);return d}};ga.extend=q(ga.allKeys),ga.extendOwn=ga.assign=q(ga.keys),ga.findKey=function(a,b,c){b=v(b,c);for(var d,e=ga.keys(a),f=0,g=e.length;f<g;f++)if(b(a[d=e[f]],d,a))return d};var M,O,S=function(a,b,c){return b in c};ga.pick=m(function(b,c){var d={},e=c[0];if(null==b)return d;ga.isFunction(e)?(1<c.length&&(e=p(e,c[1])),c=ga.allKeys(b)):(e=S,c=y(c,!1,!1),b=Object(b));for(var f=0,g=c.length;f<g;f++){var h=c[f],j=b[h];e(j,h,b)&&(d[h]=j)}return d}),ga.omit=m(function(a,b){var c,d=b[0];return ga.isFunction(d)?(d=ga.negate(d),1<b.length&&(c=b[1])):(b=ga.map(y(b,!1,!1),String),d=function(a,c){return!ga.contains(b,c)}),ga.pick(a,d,c)}),ga.defaults=q(ga.allKeys,!0),ga.create=function(a,b){var c=s(a);return b&&ga.extendOwn(c,b),c},ga.clone=function(a){return ga.isObject(a)?ga.isArray(a)?a.slice():ga.extend({},a):a},ga.tap=function(a,b){return b(a),a},ga.isMatch=function(a,b){var c=ga.keys(b),d=c.length;if(null==a)return!d;for(var e,f=Object(a),g=0;g<d;g++)if(e=c[g],b[e]!==f[e]||!(e in f))return!1;return!0},M=function(a,b,c,d){if(a===b)return 0!==a||1/a==1/b;if(null==a||null==b)return!1;if(a!=a)return b!=b;var e=typeof a;return("function"==e||"object"==e||"object"==typeof b)&&O(a,b,c,d)},O=function(d,f,g,h){d instanceof ga&&(d=d._wrapped),f instanceof ga&&(f=f._wrapped);var j=fa.call(d);if(j!==fa.call(f))return!1;switch(j){case"[object RegExp]":case"[object String]":return""+d==""+f;case"[object Number]":return+d==+d?0==+d?1/+d==1/f:+d==+f:+f!=+f;case"[object Date]":case"[object Boolean]":return+d==+f;case"[object Symbol]":return o.valueOf.call(d)===o.valueOf.call(f);}var i="[object Array]"===j;if(!i){if("object"!=typeof d||"object"!=typeof f)return!1;var k=d.constructor,m=f.constructor;if(k!==m&&!(ga.isFunction(k)&&k instanceof k&&ga.isFunction(m)&&m instanceof m)&&"constructor"in d&&"constructor"in f)return!1}h=h||[];for(var a=(g=g||[]).length;a--;)if(g[a]===d)return h[a]===f;if(g.push(d),h.push(f),i){if((a=d.length)!==f.length)return!1;for(;a--;)if(!M(d[a],f[a],g,h))return!1}else{var p,q=ga.keys(d);if(a=q.length,ga.keys(f).length!==a)return!1;for(;a--;)if(p=q[a],!b(f,p)||!M(d[p],f[p],g,h))return!1}return g.pop(),h.pop(),!0},ga.isEqual=function(a,b){return M(a,b)},ga.isEmpty=function(a){return null==a||(k(a)&&(ga.isArray(a)||ga.isString(a)||ga.isArguments(a))?0===a.length:0===ga.keys(a).length)},ga.isElement=function(a){return a&&1===a.nodeType},ga.isArray=i||function(a){return"[object Array]"===fa.call(a)},ga.isObject=function(a){var b=typeof a;return"function"==b||"object"==b&&!!a},ga.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],function(a){ga["is"+a]=function(b){return fa.call(b)==="[object "+a+"]"}}),ga.isArguments(arguments)||(ga.isArguments=function(a){return b(a,"callee")});var C=ba.document&&ba.document.childNodes;"object"!=typeof Int8Array&&"function"!=typeof C&&(ga.isFunction=function(a){return"function"==typeof a||!1}),ga.isFinite=function(a){return!ga.isSymbol(a)&&isFinite(a)&&!isNaN(parseFloat(a))},ga.isNaN=function(a){return ga.isNumber(a)&&isNaN(a)},ga.isBoolean=function(a){return!0===a||!1===a||"[object Boolean]"===fa.call(a)},ga.isNull=function(a){return null===a},ga.isUndefined=function(a){return void 0===a},ga.has=function(a,c){if(!ga.isArray(c))return b(a,c);for(var d,f=c.length,e=0;e<f;e++){if(d=c[e],null==a||!h.call(a,d))return!1;a=a[d]}return!!f},ga.noConflict=function(){return ba._=r,this},ga.identity=function(a){return a},ga.constant=function(a){return function(){return a}},ga.noop=function(){},ga.property=function(a){return ga.isArray(a)?function(b){return t(b,a)}:g(a)},ga.propertyOf=function(a){return null==a?function(){}:function(b){return ga.isArray(b)?t(a,b):a[b]}},ga.matcher=ga.matches=function(a){return a=ga.extendOwn({},a),function(b){return ga.isMatch(b,a)}},ga.times=function(a,b,c){var d=Array(aa(0,a));b=p(b,c,1);for(var e=0;e<a;e++)d[e]=b(e);return d},ga.random=function(a,b){return null==b&&(b=a,a=0),a+G(Math.random()*(b-a+1))},ga.now=Date.now||function(){return new Date().getTime()};var N={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},B=ga.invert(N),z=function(a){var b=function(b){return a[b]},c="(?:"+ga.keys(a).join("|")+")",d=RegExp(c),e=RegExp(c,"g");return function(a){return a=null==a?"":""+a,d.test(a)?a.replace(e,b):a}};ga.escape=z(N),ga.unescape=z(B),ga.result=function(a,b,c){ga.isArray(b)||(b=[b]);var d=b.length;if(!d)return ga.isFunction(c)?c.call(a):c;for(var e,f=0;f<d;f++)e=null==a?void 0:a[b[f]],void 0===e&&(e=c,f=d),a=ga.isFunction(e)?e.call(a):e;return a};var D=0;ga.uniqueId=function(a){var b=++D+"";return a?a+b:b},ga.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var T=/(.)^/,$={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},V=/\\|'|\r|\n|\u2028|\u2029/g,W=function(a){return"\\"+$[a]};ga.template=function(b,c,d){!c&&d&&(c=d),c=ga.defaults({},c,ga.templateSettings);var f,g=RegExp([(c.escape||T).source,(c.interpolate||T).source,(c.evaluate||T).source].join("|")+"|$","g"),h=0,j="__p+='";b.replace(g,function(a,c,d,e,f){return j+=b.slice(h,f).replace(V,W),h=f+a.length,c?j+="'+\n((__t=("+c+"))==null?'':_.escape(__t))+\n'":d?j+="'+\n((__t=("+d+"))==null?'':__t)+\n'":e&&(j+="';\n"+e+"\n__p+='"),a}),j+="';\n",c.variable||(j="with(obj||{}){\n"+j+"}\n"),j="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+j+"return __p;\n";try{f=new Function(c.variable||"obj","_",j)}catch(a){throw a.source=j,a}var k=function(a){return f.call(this,a,ga)},i=c.variable||"obj";return k.source="function("+i+"){\n"+j+"}",k},ga.chain=function(a){var b=ga(a);return b._chain=!0,b};var Z=function(a,b){return a._chain?ga(b).chain():b};ga.mixin=function(a){return ga.each(ga.functions(a),function(b){var c=ga[b]=a[b];ga.prototype[b]=function(){var a=[this._wrapped];return f.apply(a,arguments),Z(this,c.apply(ga,a))}}),ga},ga.mixin(ga),ga.each(["pop","push","reverse","shift","sort","splice","unshift"],function(a){var b=ca[a];ga.prototype[a]=function(){var c=this._wrapped;return b.apply(c,arguments),"shift"!==a&&"splice"!==a||0!==c.length||delete c[0],Z(this,c)}}),ga.each(["concat","join","slice"],function(a){var b=ca[a];ga.prototype[a]=function(){return Z(this,b.apply(this._wrapped,arguments))}}),ga.prototype.value=function(){return this._wrapped},ga.prototype.valueOf=ga.prototype.toJSON=ga.prototype.value,ga.prototype.toString=function(){return this._wrapped+""}}()}(d={exports:{}},d.exports),d.exports),a=(f._,function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),g=["00000000000","11111111111","22222222222","33333333333","44444444444","55555555555","66666666666","77777777777","88888888888","99999999999"],j=function(a){var b=a.length+1,c=a.map(function(a,c){return a*(b-c)}).reduce(function(a,b){return a+b})%11;return 1>=c?0:11-c},k=function(a){var b=a.toString().replace(/\D/g,"");if(11!=b.length||g.includes(b))return!1;var c=b.split("").map(function(a){return parseInt(a,10)}),d=c.slice(0,9),e=c.slice(9,2),f=j(d);return[f,j([].concat(function(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}(d),[f]))].join==e.join},l=["00000000000000","11111111111111","22222222222222","33333333333333","44444444444444","55555555555555","66666666666666","77777777777777","88888888888888","99999999999999"],m=/[-\/.]/g,o=/[^\d]/g,c=function(a,c){var d,f=(d=c?m:o,(a||"").toString().replace(d,""));if(!f)return!1;if(14!==f.length)return!1;if(l.includes(f))return!1;var g=f.substr(0,12);return g+=b(g),(g+=b(g)).substr(-2)===f.substr(-2)},e={cep:"CEP inv\xE1lido.",cpf:"CPF inv\xE1lido.",cnpj:"CNPJ inv\xE1lido.",digits:"Apenas d\xEDgitos permitidos.",email:"Email inv\xE1lido.",required:"Campo obrigat\xF3rio.",minlength:function(a){return"O campo deve ter no minimo "+a+" caracteres"},maxlength:function(a){return"O campo deve ter no m\xE1ximo "+a+" caracteres"}},i={cep:function(a){return /^[0-9]{5}(?:-[0-9]{3})?$/.test(a)},cpf:function(a){return k(a)},cnpj:function(a){return c(a)},email:function(a){return /^[a-zA-Z0-9.!#$%&’*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/.test(a)},equalTo:function(a,b){var c=this.form.querySelector(b);return!!c&&a===c.value},digits:function(a){return /^[0-9]*$/.test(a)},required:function(a,b){return a&&b},minlength:function(a,b){return 1<=b&&a.length>=b},maxlength:function(a,b){return 1<=b&&a.length<=b}},h=function(){function b(a,c){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),this.form=a,this.formInputs=[],this.customRules=c.customRules?c.customRules:{},this.validationMessages=e,this.validationHandlers=i,this.submitEventIntercept=c.submitEventIntercept?c.submitEventIntercept:null,this.fieldHolderSelector=c.fieldHolderSelector?c.fieldHolderSelector:"[data-field-holder]",this.rules=c.rules?c.rules:{},this.errorList=[],this.errorClass=c.errorClass?c.errorClass:"invalid",this.messages=c.messages?c.messages:{},this.onfocusout=c.onfocusout?c.onfocusout:null,this.beforeErrorPlacement=c.beforeErrorPlacement?c.beforeErrorPlacement:null,this.errorPlacement=c.errorPlacement?c.errorPlacement:null,this.submitHandler=c.submitHandler?c.submitHandler:null,this.invalidHandler=c.invalidHandler?c.invalidHandler:null,this.submitListenerHandler=this.onSubmit.bind(this),this.rules||this.setupRules(),this.listInputs(),this.init()}return a(b,[{key:"addCustomRule",value:function(a,b){if(!this.customRules[a]){if("function"!=typeof b)throw new Error("The second param to \"addCustomRule\" should be a function!");this.customRules[a]=b}}},{key:"addCustomRuleMessage",value:function(a,b){if(!this.validationMessages[a]){if("string"!=typeof b&&"function"!=typeof b)throw new Error("The second param to \"addCustomRuleMessage\" should be a string or a function!");this.validationMessages[a]=b}}},{key:"addError",value:function(a,b){a.classList.contains(this.errorClass)||(a.classList.add(this.errorClass),b.setAttribute("aria-invalid","true"))}},{key:"addErrorMessage",value:function(a,b){var c=a.errField,d=this.getError(b,a.el.name);c.innerHTML&&"required"!==d.rule||(c.dataset.inputError=d.rule,c.innerHTML=d.message)}},{key:"clearError",value:function(a,c){var d=f.findIndex(this.errorList,{rule:c,inputIndex:a});if("number"==typeof d){var e=this.formInputs[a];this.removeError(e.holder,e.el),b.removeErrorMessage(e.errField),this.errorList.splice(d,1)}}},{key:"clearErrors",value:function(){var a=this;this.errorPlacement||this.errorList.forEach(function(c){var d=a.formInputs[c.inputIndex],f=d.el,e=d.holder;a.removeError(e,f),b.removeErrorMessage(d.errField)}),this.errorList=[]}},{key:"destroy",value:function(){return this.form.removeEventListener("submit",this.submitListenerHandler),this.clearErrors(),this.formInputs=[],null}},{key:"getError",value:function(a){var b={rule:a.rule};return b.message="function"==typeof this.validationMessages[a.rule]?this.validationMessages[a.rule](a.required):this.validationMessages[a.rule],this.messages&&this.messages[a.el.name]&&this.messages[a.el.name][a.rule]&&(b.message=this.messages[a.el.name][a.rule]),b}},{key:"listInputs",value:function(){var a=this,b=this;Array.from(this.form.querySelectorAll(this.fieldHolderSelector)).forEach(function(c){var d=c.querySelector("input:not([disabled])")||c.querySelector("textarea:not([disabled])");if(d&&a.rules[d.name]){var f={el:d,errField:c.querySelector("[data-field-error]"),holder:c,rules:"required"===b.rules[d.name]?{required:!0}:b.rules[d.name],valid:null};a.formInputs.push(f)}})}},{key:"mapErrors",value:function(){var a=this;this.errorPlacement?this.mapForErrorPlacement():this.errorList.forEach(function(b){var c=a.formInputs[b.inputIndex],d=c.el,e=c.holder;a.addError(e,d),a.addErrorMessage(c,b)})}},{key:"mapForErrorPlacement",value:function(){var a=this,b=[];this.formInputs.forEach(function(c){var d=f.where(a.errorList,{el:c.el});if(d.length){var g=f.where(d,{rule:"required"});g.length?b.push(g[0]):b.push(d[0])}}),this.beforeErrorPlacement&&this.beforeErrorPlacement.call(this,this),b.forEach(function(b){a.errorPlacement.call(a,a.getError(b),b.el)})}},{key:"onSubmit",value:function(a){a.preventDefault(),this.submitEventIntercept&&this.submitEventIntercept.call(this,a,this),this.validate().hasError?this.invalidHandler&&this.invalidHandler.call(this,this):this.submitHandler?this.submitHandler.call(this,this.form):a.currentTarget.submit()}},{key:"removeError",value:function(a,b){a.classList.contains(this.errorClass)&&(b.setAttribute("aria-invalid","false"),a.classList.remove(this.errorClass))}},{key:"validateInput",value:function(a,b,c){var d=this,g=a,h=b;if(!b&&"number"!=typeof b){var e=f.findIndex(this.formInputs,{el:g});g=this.formInputs[e],h=e}return Object.entries(g.rules).forEach(function(a){var b=f.findIndex(d.errorList,{el:g.el,rule:a[0],inputIndex:h}),c=f.findIndex(d.errorList,{el:g.el,inputIndex:h});d.validateValue(g.el.value,a[0],a[1])?(0<=b&&d.clearError(h,a[0]),0>c&&(g.valid=!0)):0>b&&(g.valid=!1,d.errorList.push({el:g.el,rule:a[0],required:a[1],inputIndex:h}))}),"function"==typeof c&&c(),g}},{key:"validateValue",value:function(a,b,c){if(this.validationHandlers[b])return this.validationHandlers[b].call(this,a,c);if(this.customRules[b])return this.customRules[b].call(this,a,c);throw new Error("Undefined rule "+b+".")}},{key:"validate",value:function(){return this.formInputs=this.formInputs.map(this.validateInput.bind(this)),0<this.errorList.length?(this.mapErrors(),{hasError:!0,errorCount:this.errorList.length}):{hasError:!1}}},{key:"setupListeners",value:function(a){var b=this,c=this;Array.from(this.form.querySelectorAll(this.fieldHolderSelector)).forEach(function(d){var e=d.querySelector("input:not([disabled])");0<=f.findIndex(b.formInputs,{el:e})&&e.addEventListener(a,c.validateInput.bind(c,e,null,function(){0<c.errorList.length&&c.mapErrors()}))})}},{key:"init",value:function(){this.form.addEventListener("submit",this.submitListenerHandler),this.onfocusout&&this.setupListeners("focusout"),this.onkeypress&&this.setupListeners("keypress")}}],[{key:"removeErrorMessage",value:function(a){a&&a.innerHTML&&a.dataset.inputError&&(a.innerHTML="",a.dataset.inputError="")}}]),b}();window.vanillaValidation=h});
